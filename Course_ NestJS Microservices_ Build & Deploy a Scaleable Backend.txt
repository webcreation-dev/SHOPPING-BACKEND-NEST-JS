Chargé : NaN%Barre de progression : NaN%LireRetour arrière de 5 s1xVitesse de lecture0.5x0.75x1x1.25x1.5x1.75x2xAvance de 5 s0:00 / 0:004:44 / 4:44Ajouter une remarqueTranscriptionSous-titresDésactivéAnglais [Aut.]Arabe [Aut.]Allemand [Aut.]Coréen [Aut.]Espagnol [Aut.]Italien [Aut.]Portugais [Aut.]Paramètres des sous-titresParamètresAutoLecture automatiqueTélécharger la sessionRaccourcis clavierInformations sur le contenuSignaler un abusPlein écranAbout usSubtitle SettingsUpper subtitlesLower subtitlesQuick translationPhoneticSubtitlesBlur subtitles (Alt + 9)languageSelect subtitlesFont sizeAaAaAaAaAaFormatAaAaAaAaAaAaSubtitlesBlur subtitles (Alt + 8)languageSelect subtitlesFont sizeAaAaAaAaAaFormatAaAaAaAaAaAaAuto TranslateAuto pronunciationTranslate toAuto DetectAfrikaansAlbanianArabicArmenianAerbaijaniBasqueBelarusianBengaliBulgarianCatalanChinese (simplified)Chinese (traditional)CroatianCzechDanishDutchEnglishEstonianFilipinoFinnishFrenchGalicianGeorgianGermanGreekHaitian CreoleHebrewHindiHungarianIcelandicIndonesianIrishItalianJapaneseKoreanLatvianLithuanianMacedonianMalayMalteseNorwegianPersianPolishPortugueseRomanianRussianSerbianSlovakSlovenianSpanishSwahiliSwedishThaiTurkishUkrainianUrduVietnameseWelshYiddishFont sizeAaAaAaAaAaFormatAaAaAaAaAaAaShow phoneticNonePhoneticYou don't see phonetics?Font sizeAaAaAaAaAaFormatAaAaAaAaAaAaPreview SubThis is a top subtitleCái nàyThis is a bottom subtitleĐây là phần dịchFrequently used featuresFont typeDefault (recommended)Arial, Helvetica, sans-serifTimes New Roman, Times, serifPause video when mouse overShow progress barExtend sub timeShift sub time0sSpeed0.50.75Normal1.251.51.752Auto-Pause mode (P)Delay subtitlesShow subtitles after0s1s2s3s4s5s6s7s8s10sResume after pauseTime before resume0s1s2s3s4s5s6s7s8s10sExtra featuresUpload subtitlesHelpPrint subtitlesBookmarksShow full subtitlesShortcut keysEssentialsSubtitlesQ/SPACEPlay/Pause<-Rewind 10sPOn/Off Auto-pause modeAPrevious subtitle->Fast forward 10sMMuteSRepeat one subtitle=Speed up 0.1xFFull screenDNext subtitle-Slow down 0.1xGRead upper subtitleHRead lower subtitleShow upper subtilesSelect subtitlesShow Lower subtilesSelect subtitlesShow quick translationFull settingsView subtitlesFull subtitlesBookmarks18. Common Auth Guard20. Reservations Payments - Part 1Contenu du coursFermer le voletSection 1 : Introduction7 / 7 | 14 min7 sessions sur 7 terminées14 minSession terminée. La progression ne peut pas être modifiée pour cet élément.Lecture1. Introduction1 minSession terminée. La progression ne peut pas être modifiée pour cet élément.Lecture2. Course Outline3 minSession terminée. La progression ne peut pas être modifiée pour cet élément.Lecture3. Course Prerequisites1 minSession terminée. La progression ne peut pas être modifiée pour cet élément.Lecture4. System Architecture4 minRessourcessleepr_diagram.drawio.pdfSession terminée. La progression ne peut pas être modifiée pour cet élément.Lancement5. Project Dependencies1 minSession terminée. La progression ne peut pas être modifiée pour cet élément.Lancement6. GitHub Repository1 minSession terminée. La progression ne peut pas être modifiée pour cet élément.Lecture7. Project Setup5 minSection 2 : Common Library6 / 6 | 1 h 10 min6 sessions sur 6 terminées1 h 10 minSection 3 : Authentication5 / 5 | 1 h 19 min5 sessions sur 5 terminées1 h 19 minSection 4 : Payments3 / 3 | 35 min3 sessions sur 3 terminées35 minSession terminée. La progression ne peut pas être modifiée pour cet élément.Lecture19. Stripe Setup15 minSession terminée. La progression ne peut pas être modifiée pour cet élément.Lecture20. Reservations Payments - Part 110 minSession terminée. La progression ne peut pas être modifiée pour cet élément.Lecture21. Reservations Payments - Part 210 minSection 5 : Notifications0 / 2 | 27 min0 sessions sur 2 terminées27 minSection 6 : Production Deployment9 / 9 | 1 h 17 min9 sessions sur 9 terminées1 h 17 minSection 7 : Google Cloud2 / 2 | 15 min2 sessions sur 2 terminées15 minSection 8 : Amazon Web Services0 / 3 | 28 min0 sessions sur 3 terminées28 minSection 9 : E2E Tests0 / 2 | 25 min0 sessions sur 2 terminées25 minSection 10 : Extra2 / 2 | 17 min2 sessions sur 2 terminées17 minSection 11 : TypeORM & MySQL4 / 4 | 43 min4 sessions sur 4 terminées43 minSection 12 : RabbitMQ0 / 2 | 17 min0 sessions sur 2 terminées17 minSection 13 : gRPC3 / 5 | 46 min3 sessions sur 5 terminées46 minSection 14 : GraphQL API Gateway4 / 5 | 59 min4 sessions sur 5 terminées59 minSection 15 : Prisma8 / 8 | 57 min8 sessions sur 8 terminées57 minPrésentationQ & RQuestions et réponsesMes NotesAnnoncesAvisOutils d'apprentissageDownload ContentRevenir à Toutes les questionsCError 500 "Internal server error" on set a reservations route. Section 6 lesson 310 vote positif0Signaler un abusCodexboot · Session 31 · Il y a 9 moisCreate user and login route work. Set reservations not. In top left of image can see ports numer. In reservation.controller.ts write a console.log('in controller') to debug. However, I haven't seen the text anywhere. I don't know how to troubleshoot this code error anymore.4 réponsesSuivre les réponsesMichael — Formateur 1 vote positif1Signaler un abusIl y a 8 moisCan you share your GitHub repository URL with me (and include any .env files used) so I can try to reproduce the issue? ThanksMichael — Formateur 0 vote positif0Signaler un abusIl y a 8 moisThanks for providing that repo and apologies for the delay.I see an error in payments when making a request to reservations from your code:payments-1 | [02:38:03.991] ERROR (48): A `return_url` must be specified because this Payment Intent is configured to automatically accept the payment methods enabled in the Dashboard, some of which may require a full page redirect to succeed. If you do not want to accept redirect-based payment methods, set `automatic_payment_methods[enabled]` to `true` and `automatic_payment_methods[allow_redirects]` to `never` when creating Setup Intents and Payment Intents. {"context":"RpcExceptionsHandler"} I took a closer look at your payments service code and it looks nothing like mine in the project: https://github.com/mguay22/sleepr/blob/main/apps/payments/src/payments.service.ts#L24Please update your payments code to match the logic we went over in the payments lectures here: https://www.udemy.com/course/nestjs-microservices-build-deploy-a-scaleable-backend/learn/lecture/37165746#overviewAfter your payments are successful reservations should complete OK.CCodexboot0 vote positif0Signaler un abusIl y a 8 moisIn the payments lectures at minut 8:00 you fix an error, so is your code but not in repository. "It appears that some people in the course are having issues from the Stripe API when sending our credit card details directly to the API."I got a way to resolve error:const paymentIntent = await this.stripe.paymentIntents.create({ amount: amount * 100, confirm: true, currency: 'usd', payment_method: 'pm_card_visa', automatic_payment_methods: { enabled: true, allow_redirects: 'never', }, });Now, the reservations work, and I can see the payment in the Stripe account, but an error appears in the notifications. In Docker Desktop, the notifications container gets stopped and a new one starts. The old container shows errors.I understand that it is an authentication error, but I haven't found where it comes from. I obtained a new refresh token from Google Oauth Playground and updated the refreshToken in the Google secret, deleted the Google secret and created it again. At APIs & Services > Library, I enabled the Gmail API. Deleted notifications deployment and created again. It still doesn't work. If you want to see repository URL i will send an invitation to private repository. Don't want to make it public again. Google Cloud disable some keys because detect secrets keys exposed. Error: invalid_grant: Bad Request at /usr/src/app/node_modules/.pnpm/nodemailer@6.9.14/node_modules/nodemailer/lib/xoauth2/index.js: at PassThrough.<anonymous> (/usr/src/app/node_modules/.pnpm/nodemailer@6.9.14/node_modules/nodemailer/lib/xoauth2/index.js:341:20)at Object.onceWrapper (node:events:634:28)at PassThrough.emit (node:events:520:28)2at endReadableNT (node:internal/streams/readable:1696:12)at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {code: 'EAUTH', command: 'AUTH XOAUTH2'Michael — Formateur 0 vote positif0Signaler un abusIl y a 8 moisThanks for sharing.Yes, I didn't include this change to the repository as not all users are seeing issues with the code as-is (including me). I've mentioned it for others who potentially have different Stripe limitations.JAjouter une réponse