<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contrat de Bail</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: Arial, sans-serif;
        background-color: #f8f9fa;
        padding: 32px;
        line-height: 1.5;
      }

      .container {
        max-width: 1024px;
        margin: 0 auto;
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }

      .gradient-header {
        background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
        padding: 24px 32px;
        border-bottom: 1px solid #e5e7eb;
      }

      .logo {
        width: 48px;
        height: 48px;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .logo img {
        width: 250px;
        margin-left: -30px;
        margin-top: -20px;
      }

      .qr-code {
        width: 90px;
        height: 90px;
        border: 2px solid #22c55e;
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: white;
        padding: 10px; /* Ajouter padding ici */
        box-sizing: border-box; /* Important pour inclure le padding dans la taille */
      }
      .qr-code img {
        width: 100%; /* L'image prendra tout l'espace disponible */
        height: 100%;
        border-radius: 4px;
        object-fit: contain; /* Maintient les proportions */
      }

      .title-section {
        text-align: center;
        padding: 24px 32px;
        background-color: white;
        border-bottom: 1px solid #e5e7eb;
      }

      .title-section h2 {
        font-size: 28px;
        font-weight: 600;
        color: #374151;
        margin-bottom: 6px;
      }

      .title-section p {
        font-size: 16px;
        color: #16a34a;
        font-weight: 500;
      }

      .parties-section {
        padding: 24px 32px;
        background-color: #f9fafb;
        border-bottom: 1px solid #e5e7eb;
      }

      .party-card {
        background-color: white;
        padding: 24px;
        border-radius: 8px;
        border: 1px solid #f3f4f6;
        height: 100%;
      }

      .party-title {
        font-size: 16px;
        font-weight: 500;
        color: #4b5563;
        margin-bottom: 16px;
        padding-bottom: 8px;
        border-bottom: 1px solid #f3f4f6;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .party-title svg {
        width: 20px;
        height: 20px;
        color: #22c55e;
      }

      .party-details {
        color: #4b5563;
        font-size: 14px;
      }

      .party-details p {
        margin-bottom: 12px;
      }

      .party-details span {
        font-weight: 500;
      }

      .content-section {
        padding: 24px 32px;
        background-color: white;
      }

      .article {
        margin-bottom: 32px;
        padding-bottom: 24px;
        border-bottom: 1px dashed #e5e7eb;
      }

      .article:last-child {
        border-bottom: none;
        margin-bottom: 0;
      }

      .article h3 {
        font-size: 16px;
        font-weight: 500;
        color: #374151;
        margin-bottom: 12px;
        position: relative;
        padding-left: 16px;
      }

      .article h3:before {
        content: '';
        position: absolute;
        left: 0;
        top: 4px;
        height: 20px;
        width: 4px;
        background-color: #86efac;
        border-radius: 2px;
      }

      .article p {
        font-size: 14px;
        color: #4b5563;
        padding-left: 16px;
      }

      .signatures-section {
        padding: 24px 32px;
        border-top: 1px solid #e5e7eb;
        background-color: #f9fafb;
        margin-top: 16px;
      }

      .signature-block {
        text-align: center;
      }

      .signature-block p:first-child {
        font-size: 14px;
        color: #6b7280;
        margin-bottom: 24px;
      }

      .signature-image {
        width: 150px;
        height: 80px;
        border: 2px dashed #d1d5db;
        border-radius: 8px;
        margin: 16px auto;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #f9fafb;
        position: relative;
        overflow: hidden;
      }

      .signature-image img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
      }

      .signature-image-placeholder {
        color: #9ca3af;
        font-size: 12px;
        text-align: center;
        line-height: 1.2;
      }

      .signature-line {
        height: 1px;
        background-color: #d1d5db;
        width: 80%;
        margin: 8px auto;
      }

      .signature-block p:last-child {
        font-size: 14px;
        color: #374151;
        font-weight: 500;
      }

      .footer {
        background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
        padding: 16px 32px;
        text-align: center;
        font-size: 12px;
        color: #4b5563;
      }

      .footer p {
        margin-bottom: 4px;
      }

      .footer p:last-child {
        margin-bottom: 0;
      }

      @media print {
        body {
          background: none;
          padding: 0;
        }

        .container {
          box-shadow: none;
          border-radius: 0;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- En-tête avec logo et QR code -->
      <div class="gradient-header">
        <table width="100%" cellpadding="0" cellspacing="0">
          <tr>
            <td style="vertical-align: middle; text-align: left">
              <div class="logo">
                <img
                  src="https://shopping-backend-nest-js-production.up.railway.app/upload/locapay.png"
                  alt="Logo"
                />
              </div>
            </td>
            <td
              style="
                vertical-align: middle;
                text-align: right;
                padding-left: 600px;
              "
            >
              <div class="qr-code">
                <!-- Remplacez cette URL par votre QR code ou utilisez une variable template -->
                <img
                  src="https://shopping-backend-nest-js-production.up.railway.app/upload/qrcode.png"
                  alt="QR Code"
                />
              </div>
            </td>
          </tr>
        </table>
      </div>

      <!-- Section titre séparée -->
      <div class="title-section">
        <h2>{{contrat.type}}</h2>
        <p>{{contrat.sousTitre}}</p>
      </div>

      <!-- Parties (Bailleur et Preneur) -->
      <div class="parties-section">
        <table width="100%" cellpadding="0" cellspacing="0">
          <tr>
            <td width="50%" style="vertical-align: top; padding-right: 8px">
              <div class="party-card">
                <h2 class="party-title">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                      clip-rule="evenodd"
                    />
                  </svg>
                  LE BAILLEUR
                </h2>
                <div class="party-details">
                  <p><span>Nom :</span> {{bailleur.nom}}</p>
                  <p><span>Adresse :</span> {{bailleur.adresse}}</p>
                  <p><span>Téléphone :</span> {{bailleur.telephone}}</p>
                  <p><span>Email :</span> {{bailleur.email}}</p>
                </div>
              </div>
            </td>
            <td width="50%" style="vertical-align: top; padding-left: 8px">
              <div class="party-card">
                <h2 class="party-title">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                      clip-rule="evenodd"
                    />
                  </svg>
                  LE PRENEUR
                </h2>
                <div class="party-details">
                  <p><span>Nom :</span> {{preneur.nom}}</p>
                  <p><span>Adresse :</span> {{preneur.adresse}}</p>
                  <p><span>Téléphone :</span> {{preneur.telephone}}</p>
                  <p><span>Email :</span> {{preneur.email}}</p>
                </div>
              </div>
            </td>
          </tr>
        </table>
      </div>

      <!-- Contenu du contrat -->
      <div class="content-section">
        {{#each articles}}
        <div class="article">
          <h3>Article {{numero}} - {{titre}}</h3>
          <p>{{contenu}}</p>
        </div>
        {{/each}}
      </div>

      <!-- Signatures -->
      <div class="signatures-section">
        <table width="100%" cellpadding="0" cellspacing="0">
          <tr>
            <td
              width="50%"
              style="
                text-align: center;
                vertical-align: top;
                padding-right: 8px;
              "
            >
              <div class="signature-block">
                <p>Fait à {{contrat.lieu}}, le {{contrat.dateSignature}}</p>
                <div class="signature-image">
                  {{#if bailleur.signature}}
                  <img
                    src="{{bailleur.signature}}"
                    alt="Signature du bailleur"
                  />
                  {{else}}
                  <div class="signature-image-placeholder">
                    Zone de signature<br />du bailleur
                  </div>
                  {{/if}}
                </div>
                <div class="signature-line"></div>
                <p>Le Bailleur</p>
              </div>
            </td>
            <td
              width="50%"
              style="text-align: center; vertical-align: top; padding-left: 8px"
            >
              <div class="signature-block">
                <p>Fait à {{contrat.lieu}}, le {{contrat.dateSignature}}</p>
                <div class="signature-image">
                  {{#if preneur.signature}}
                  <img src="{{preneur.signature}}" alt="Signature du preneur" />
                  {{else}}
                  <div class="signature-image-placeholder">
                    Zone de signature<br />du preneur
                  </div>
                  {{/if}}
                </div>
                <div class="signature-line"></div>
                <p>Le Preneur</p>
              </div>
            </td>
          </tr>
        </table>
      </div>

      <!-- Pied de page -->
      <footer class="footer">
        <p>
          Contrat établi en deux exemplaires originaux - Un exemplaire pour
          chaque partie
        </p>
        <p>{{agence.nom}} - {{agence.adresse}} - Tél: {{agence.telephone}}</p>
      </footer>
    </div>
  </body>
</html>
